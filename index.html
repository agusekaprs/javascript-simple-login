<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Dashboard</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <script src='auth.js'></script>
  <script src='init.js'></script>
</head>
<body>
  <p>halaman setelah login</p>
  <table>
    <tr>
      <td>NRP</td>
      <td>:</td>
      <td><span id="dnrp"></span></td>
    </tr>
    <tr>
      <td>Nama</td>
      <td>:</td>
      <td id="dnama"></td>
    </tr>
    <tr>
      <td>Dept</td>
      <td>:</td>
      <td id="ddept"></td>
    </tr>
    <tr>
      <td>Posisi</td>
      <td>:</td>
      <td id="dposisi"></td>
    </tr>
  </table>
  <button type="button" id="btnLogout" onclick="logOut()">Logout</button>
  <script>
    function parseJwt (token) {
      var base64Url = token.split('.')[1];
      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));

      return JSON.parse(jsonPayload);
    }
    var user = parseJwt(localStorage.getItem("token"));
    console.log(user)
    document.getElementById("dnrp").textContent=user.nrp
    document.getElementById("dnama").textContent=user.nama
    document.getElementById("ddept").textContent=user.dept
    document.getElementById("dposisi").textContent=user.posisi
  </script>
</body>
</html>